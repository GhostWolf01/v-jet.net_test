(function(e){function t(t){for(var s,i,r=t[0],c=t[1],l=t[2],u=0,d=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},n={app:0},o=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var m=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0953":function(e,t,a){},"218d":function(e,t,a){"use strict";a("4a97")},"21bb":function(e,t,a){"use strict";a("2dad")},"22e7":function(e,t,a){"use strict";a("2fd8")},"2dad":function(e,t,a){},"2fd8":function(e,t,a){},"4a97":function(e,t,a){},"537f":function(e,t,a){"use strict";a("945c")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{staticClass:"menu"},e._l(e.menu,(function(t,s){return a("v-btn",{key:s,staticClass:"menu__btn",on:{click:function(a){return e.toPatchName(t.patchName)}}},[e._v(" "+e._s(t.name)+" ")])})),1),a("v-main",[a("div",{staticClass:"main__search"},[a("v-select",{staticClass:"main__search__select",attrs:{label:"Жанр",items:e.searchGenerItems},model:{value:e.searchGener,callback:function(t){e.searchGener=t},expression:"searchGener"}}),a("v-text-field",{staticClass:"main__search__text",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-btn",{staticClass:"main__search__btn",on:{click:e.toSearch}},[e._v(" Поиск ")])],1),a("router-view")],1)],1)},o=[],i=a("5530"),r=(a("ac1f"),a("841c"),a("2f62")),c={name:"App",data:function(){return{search:"",searchGenerItems:[{value:"",text:"All"}],searchGener:"",menu:[{name:"Главная",patchName:"home"},{name:"Все сеансы в кинотеатре",patchName:"movies_sessions"}]}},computed:Object(i["a"])({},Object(r["c"])({getGenres:"getGenres"})),created:function(){for(var e in this.getGenres)this.searchGenerItems.push({value:e,text:this.getGenres[e]})},methods:{toPatchName:function(e){this.$router.push({name:e})},toSearch:function(){this.$router.push({name:"film_search",query:{name:this.search,genre:this.searchGener}}).catch((function(){}))}}},l=c,m=(a("5c0b"),a("2877")),u=a("6544"),d=a.n(u),_=a("7496"),v=a("8336"),h=a("f6c4"),f=a("b974"),p=a("8654"),b=Object(m["a"])(l,n,o,!1,null,null,null),w=b.exports;d()(b,{VApp:_["a"],VBtn:v["a"],VMain:h["a"],VSelect:f["a"],VTextField:p["a"]});var g=a("8c4f"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[e._l(e.getMoviesData,(function(e){return a("Movies",{key:e.id,attrs:{item:e}})})),a("div",{staticClass:"home__scroll"})],2)},y=[],D=a("1da1"),C=(a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"home__item"},[a("img",{staticClass:"home__item-img",attrs:{src:e.item.image,alt:"movie image"}}),a("div",{staticClass:"home__item-info"},[a("p",{staticClass:"home__item-info__title",domProps:{innerHTML:e._s(e.item.name)}}),a("p",{staticClass:"home__item-info__genre"},[e._v(" Жанр: "+e._s(e.getGenres[e.item.genre])+" ")]),a("div",{staticClass:"home__item-info__description",domProps:{innerHTML:e._s(e.item.description)}})]),a("v-btn",{staticClass:"home__item-btn",on:{click:e.toFilm}},[e._v(" Подробней ")])],1)}),O=[],j={name:"Movies",props:{item:{type:Object}},computed:Object(i["a"])({},Object(r["c"])({getGenres:"getGenres"})),methods:{toFilm:function(){this.$router.push({name:"film",params:{id:this.item.id}})}}},x=j,M=(a("ef7a"),a("b0af")),S=Object(m["a"])(x,C,O,!1,null,null,null),I=S.exports;d()(S,{VBtn:v["a"],VCard:M["a"]});var P={name:"Home",components:{Movies:I},data:function(){return{loading:!1}},computed:Object(i["a"])({},Object(r["c"])({getMoviesData:"getMoviesData"})),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMoviesData();case 2:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])({},Object(r["b"])({loadMoviesData:"loadMoviesData"}))},R=P,T=(a("21bb"),Object(m["a"])(R,k,y,!1,null,null,null)),$=T.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"movies-sessions"},e._l(e.getMoviesData,(function(e){return a("MovieSessions",{key:e.id,attrs:{item:e}})})),1)},G=[],V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"movie-sessions"},[a("img",{staticClass:"movie-sessions__img",attrs:{src:e.item.image,alt:"movie image"}}),a("div",{staticClass:"movie-sessions__info"},[a("p",{staticClass:"movie-sessions__info-title",domProps:{innerHTML:e._s(e.item.name)}}),a("div",{staticClass:"movie-sessions__info__date"},e._l(e.getMovieShowsData[e.item.id],(function(t,s){return a("p",{key:s,staticClass:"movie-sessions__info__date__item"},[e._v(" "+e._s(t.showdate+": "+t.daytime.replace(/;/g,"; "))+" ")])})),0)]),a("v-btn",{staticClass:"movie-sessions__btn",on:{click:e.toBook}},[e._v(" Забронировать Билет ")]),a("BookPlace",{ref:"bookPlace"})],1)},E=[],L=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{staticClass:"book-place"},[e.bookPlaceData?e._e():a("div",{staticClass:"book-place__header"},[a("p",{staticClass:"book-place__header__title",domProps:{innerHTML:e._s("Забронировать билеты на "+e.data.nameFilm)}})]),a("div",{staticClass:"book-place__body"},[e.bookPlaceData?e._e():a("div",{staticClass:"book-place__body__show-date"},[a("v-select",{staticClass:"book-place__body__show-date__select",attrs:{items:e.showDateItems,label:"День"},on:{change:e.changeShowDate},model:{value:e.showDateItem,callback:function(t){e.showDateItem=t},expression:"showDateItem"}}),a("v-select",{staticClass:"book-place__body__show-date__select",attrs:{items:e.dayTimeItems,disabled:!e.activeDayTime,label:"Время"},on:{change:e.changeDayTime},model:{value:e.dayTimeItem,callback:function(t){e.dayTimeItem=t},expression:"dayTimeItem"}})],1),e.bookPlaceData?e._e():a("div",{staticClass:"book-place__body__places"},[a("v-select",{staticClass:"book-place__body__places__select",attrs:{items:e.rowsItems,disabled:!e.activeRows,label:"Ряд"},on:{change:e.changeRows},model:{value:e.rowsItem,callback:function(t){e.rowsItem=t},expression:"rowsItem"}}),a("v-select",{staticClass:"book-place__body__places__select",attrs:{items:e.seatsItems,disabled:!e.activeSeats,label:"Место"},on:{change:e.changeSeats},model:{value:e.seatsItem,callback:function(t){e.seatsItem=t},expression:"seatsItem"}})],1),e.bookPlaceData?a("div",{staticClass:"book-place__body__places__ssuces"},[a("p",{staticClass:"book-place__body__places__success__title",domProps:{innerHTML:e._s("Забронирован билеты на "+e.data.nameFilm)}}),a("p",{staticClass:"book-place__body__places__success__text"},[e._v(" День: "+e._s(e.bookPlaceData.showdate)),a("br"),e._v(" Время: "+e._s(e.bookPlaceData.daytime)),a("br"),e._v(" Ряд: "+e._s(e.bookPlaceData.row)),a("br"),e._v(" Место: "+e._s(e.bookPlaceData.seat)),a("br"),e._v(" Билет: "+e._s(e.bookPlaceData.ticketkey)),a("br")])]):e._e()]),a("div",{staticClass:"book-place__footer"},[a("v-btn",{staticClass:"book-place__footer__btn",on:{click:e.close}},[e._v(" Закрыть ")]),e.bookPlaceData?e._e():a("v-btn",{staticClass:"book-place__footer__btn",attrs:{disabled:!e.activeToBook},on:{click:e.toBook}},[e._v(" Забронировать ")])],1)])],1)}),H=[],F=a("b85c"),N=(a("1276"),a("99af"),{name:"BookPlace",data:function(){return{dialog:!1,data:{nameFilm:"",id:null},movieSessions:[],showDateItems:[],showDateItem:"",dayTimeItems:[],dayTimeItem:"",activeDayTime:!1,showPlacesData:[],rowsItems:[],rowsItem:"",activeRows:!1,seatsItems:[],seatsItem:"",activeSeats:!1,activeToBook:!1,bookPlaceData:null}},methods:{fetch:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var a,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/movieShows?movie_id=".concat(e.data.id));case 2:if(a=t.sent,a.data){e.movieSessions=a.data.data[e.data.id],s=Object(F["a"])(e.movieSessions);try{for(s.s();!(n=s.n()).done;)o=n.value,e.showDateItems.push(o.showdate)}catch(i){s.e(i)}finally{s.f()}}case 4:case"end":return t.stop()}}),t)})))()},handleShow:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.data=e,t.movieSessions=[],t.showDateItems=[],t.showDateItem="",t.dayTimeItems=[],t.dayTimeItem="",t.showPlacesData=[],t.rowsItems=[],t.rowsItem="",t.seatsItems=[],t.seatsItem="",a.next=13,t.fetch();case 13:t.dialog=!0;case 14:case"end":return a.stop()}}),a)})))()},changeShowDate:function(){var e,t=Object(F["a"])(this.movieSessions);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(this.showDateItem===a.showdate){this.dayTimeItems=a.daytime.split(";");break}}}catch(s){t.e(s)}finally{t.f()}this.activeDayTime=!0},changeDayTime:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var a,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/showPlaces?movie_id=".concat(e.data.id,"&daytime=").concat(e.dayTimeItem,"&showdate=").concat(e.showDateItem));case 2:if(a=t.sent,a.data){e.showPlacesData=a.data.data,s=Object(F["a"])(e.showPlacesData);try{for(s.s();!(n=s.n()).done;)o=n.value,e.rowsItems.push(o[0].row)}catch(i){s.e(i)}finally{s.f()}e.activeRows=!0}case 4:case"end":return t.stop()}}),t)})))()},changeRows:function(){var e,t=Object(F["a"])(this.showPlacesData);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a[0].row===this.rowsItem){var s,n=Object(F["a"])(a[1]);try{for(n.s();!(s=n.n()).done;){var o=s.value;o.is_free&&this.seatsItems.push(o.seat)}}catch(i){n.e(i)}finally{n.f()}break}}}catch(i){t.e(i)}finally{t.f()}this.activeSeats=!0},changeSeats:function(){this.activeToBook=!0},close:function(){this.dialog=!1},toBook:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/bookPlace",{movie_id:e.data.id,row:e.rowsItem,seat:e.seatsItem,showdate:e.showDateItem,daytime:e.dayTimeItem});case 3:a=t.sent,a.data&&(e.bookPlaceData=a.data.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}}),A=N,q=(a("59e8"),a("169a")),U=Object(m["a"])(A,L,H,!1,null,null,null),J=U.exports;d()(U,{VBtn:v["a"],VCard:M["a"],VDialog:q["a"],VSelect:f["a"]});var W={name:"MovieSessions",components:{BookPlace:J},props:{item:{type:Object}},computed:Object(i["a"])({},Object(r["c"])({getMovieShowsData:"getMovieShowsData"})),methods:{toBook:function(){this.$refs.bookPlace.handleShow({nameFilm:this.item.name,id:this.item.id})}}},Y=W,z=(a("22e7"),Object(m["a"])(Y,V,E,!1,null,null,null)),K=z.exports;d()(z,{VBtn:v["a"],VCard:M["a"]});var Q={name:"MoviesSessions",components:{MovieSessions:K},data:function(){return{data:[]}},computed:Object(i["a"])({},Object(r["c"])({getMoviesData:"getMoviesData"})),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMovieShowsData();case 2:if(e.getMoviesData){t.next=5;break}return t.next=5,e.loadMoviesData();case 5:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])({},Object(r["b"])({loadMovieShowsData:"loadMovieShowsData",loadMoviesData:"loadMoviesData"}))},X=Q,Z=(a("218d"),Object(m["a"])(X,B,G,!1,null,null,null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"film"},[a("v-card",{staticClass:"film__container"},[a("img",{staticClass:"film__img",attrs:{src:e.data.image,alt:"movie image"}}),a("div",{staticClass:"film__info"},[a("p",{staticClass:"film__info__title",domProps:{innerHTML:e._s(e.data.name)}}),a("p",{staticClass:"film__info__genre"},[e._v(" Жанр: "+e._s(e.getGenres[e.data.genre])+" ")]),a("div",{staticClass:"film__info__container"},[a("div",{staticClass:"film__info__additional",domProps:{innerHTML:e._s(e.data.additional)}}),a("div",{staticClass:"film__info__description",domProps:{innerHTML:e._s(e.data.description)}})]),a("div",{staticClass:"film__movie-sessions"},[a("p",{staticClass:"film__movie-sessions__info-title"},[e._v(" Сеансы в кинотеатре ")]),e._l(e.movieSessions,(function(t,s){return a("p",{key:s,staticClass:"film__movie-sessions__info-date"},[e._v(" "+e._s(t.showdate+": "+t.daytime.replace(/;/g,"; "))+" ")])}))],2)]),a("v-btn",{staticClass:"film__movie-sessions__btn",on:{click:e.toBook}},[e._v(" Забронировать Билет ")])],1),a("div",{staticClass:"film__scroll"}),a("BookPlace",{ref:"bookPlace"})],1)},ae=[],se={name:"Film",components:{BookPlace:J},data:function(){return{data:{},movieSessions:[]}},computed:Object(i["a"])({},Object(r["c"])({getMoviesData:"getMoviesData",getGenres:"getGenres"})),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetch();case 2:case"end":return t.stop()}}),t)})))()},methods:{fetch:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/movies?movie_id=".concat(e.$route.params.id));case 2:return a=t.sent,a.data&&(e.data=a.data.data[0]),t.next=6,e.$http.get("/movieShows?movie_id=".concat(e.$route.params.id));case 6:a=t.sent,a.data&&(e.movieSessions=a.data.data[e.$route.params.id]);case 8:case"end":return t.stop()}}),t)})))()},toBook:function(){this.$refs.bookPlace.handleShow({id:this.data.id,nameFilm:this.data.name})}}},ne=se,oe=(a("9d42"),Object(m["a"])(ne,te,ae,!1,null,null,null)),ie=oe.exports;d()(oe,{VBtn:v["a"],VCard:M["a"]});var re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[e._l(e.data,(function(e){return a("Movies",{key:e.id,attrs:{item:e}})})),a("div",{staticClass:"home__scroll"})],2)},ce=[],le=(a("a15b"),{name:"Home",components:{Movies:I},data:function(){return{loading:!1,data:[]}},created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetch();case 2:case"end":return t.stop()}}),t)})))()},beforeRouteUpdate:function(e,t,a){a(),this.fetch()},methods:{fetch:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],""!==e.$route.query.name&&a.push("name=".concat(e.$route.query.name)),""!==e.$route.query.genre&&a.push("genres=".concat(e.$route.query.genre)),t.next=5,e.$http.get("/movies?".concat(a.join("&")));case 5:s=t.sent,s.data&&(e.data=s.data.data);case 7:case"end":return t.stop()}}),t)})))()}}}),me=le,ue=(a("537f"),Object(m["a"])(me,re,ce,!1,null,null,null)),de=ue.exports;s["a"].use(g["a"]);var _e=[{path:"/v-jet.net_test/",name:"home",component:$},{path:"/v-jet.net_test/movies_sessions",name:"movies_sessions",component:ee},{path:"/v-jet.net_test/film/:id",name:"film",component:ie},{path:"/v-jet.net_test/film_search",name:"film_search",component:de}],ve=new g["a"]({mode:"history",base:"",routes:_e}),he=ve,fe=a("bc3a"),pe=a.n(fe),be=pe.a.create({baseURL:"https://cinema-api-test.y-media.io/v1"}),we=be;s["a"].use(r["a"]);var ge=new r["a"].Store({state:{movieShowsData:null,moviesData:null,genres:{0:"ACTION",1:"ADVENTURES",2:"COMEDY",3:"DRAMA",4:"HORROR",5:"WESTERNS"}},getters:{getMoviesData:function(e){return e.moviesData},getMovieShowsData:function(e){return e.movieShowsData},getGenres:function(e){return e.genres}},mutations:{LoadMoviesData:function(e,t){e.moviesData=t},LoadMovieShowsData:function(e,t){e.movieShowsData=t}},actions:{loadMoviesData:function(e){return Object(D["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,we.get("/movies");case 3:s=t.sent,s.data&&(n=s.data.data,a("LoadMoviesData",n));case 5:case"end":return t.stop()}}),t)})))()},loadMovieShowsData:function(e){return Object(D["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,we.get("/movieShows");case 3:s=t.sent,s.data&&(n=s.data.data,a("LoadMovieShowsData",n));case 5:case"end":return t.stop()}}),t)})))()}},modules:{}}),ke=a("f309");s["a"].use(ke["a"]);var ye=new ke["a"]({theme:{dark:!0}});a("d5e8"),a("5363"),a("b383");s["a"].config.productionTip=!1,s["a"].prototype.$http=we,new s["a"]({router:he,store:ge,vuetify:ye,render:function(e){return e(w)}}).$mount("#app")},"59e8":function(e,t,a){"use strict";a("ed79")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"945c":function(e,t,a){},"9c0c":function(e,t,a){},"9d42":function(e,t,a){"use strict";a("b8a4")},b383:function(e,t,a){},b8a4:function(e,t,a){},ed79:function(e,t,a){},ef7a:function(e,t,a){"use strict";a("0953")}});
//# sourceMappingURL=app.bccb014f.js.map